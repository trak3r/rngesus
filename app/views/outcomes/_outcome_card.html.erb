<%= turbo_frame_tag dom_id(roll, :outcome), 
                     class: "w-full",
                     data: { 
                       controller: "slot-machine dice",
                       slot_machine_final_result_value: result.try(:name_with_rolls) || 'No match',
                       slot_machine_all_results_value: roll.results.map(&:name).to_json,
                       slot_machine_index_value: index,
                       dice_dice_value: roll.dice,
                       dice_result_value: result.try(:name_with_rolls) || 'No match',
                       dice_rolled_value: rolled,
                       dice_animate_value: local_assigns.fetch(:animate, true)
                     } do %>
  <%= button_to reroll_randomizer_outcome_path(randomizer, roll),
                method: :post,
                class: "card-index w-full hover:shadow-lg transition-all duration-300 flex flex-col items-center cursor-pointer hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",
                form: { class: "w-full" } do %>

    <!-- Re-roll Ribbon (always visible, touch-friendly) -->
    <div class="absolute bottom-[15px] right-[-60px] w-[200px] bg-pencil text-white text-xs font-typewriter py-1 text-center transform rotate-[-45deg] shadow-lg z-50 pointer-events-none border border-white/20">
      Click to re-roll
    </div>


    <div class="relative group inline-block text-3xl font-bold font-typewriter mb-2 text-center text-pencil min-h-[4.5rem] flex items-center justify-center">
      <span class="block group-hover:hidden" data-slot-machine-target="result">
        <%= result.try(:name_with_rolls) || 'No match' %>
      </span>
      <span class="hidden group-hover:block text-pencil/70">
        <%= result.try(:name) || 'No match' %>
      </span>
    </div>

    <div class="text-pencil/60 text-sm font-handwriting text-xl">
      <%= roll.name %>
      &middot;
      <%= roll.dice_object.name %>
      &rarr;
      <%= rolled %>
    </div>
  <% end %>
<% end %>
