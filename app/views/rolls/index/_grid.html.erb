<div id="rolls_grid" class="grid grid-cols-[repeat(auto-fill,minmax(24rem,1fr))] gap-4">

  <% if @tab == 'your_rolls' %>
    <!-- New Roll Card (only on 'Your Rolls' tab) -->
    <div class="card-index flex flex-col group p-4 min-h-[220px] transition-transform hover:-rotate-1 bg-primary/8">
      <%= link_to choose_method_rolls_path,
                  class: "flex-1 flex flex-col no-underline text-inherit",
                  data: { turbo_frame: "_top" } do %>

        <h2 class="card-title text-xl font-bold mb-2 font-typewriter border-b border-red-300 pb-1">New Roll</h2>

        <p class="flex-1 text-base-content/70 font-handwriting text-lg">
          Create your own!
        </p>

      <% end %>
    </div>
  <% end %>

  <% if @rolls.empty? %>
    <div class="card-index flex flex-col items-center justify-center p-8 min-h-[220px] border-4 border-dashed border-base-300 rounded-box text-base-content/40 rotate-1 select-none grayscale">
      <%= icon 'mood-sad', variant: :outline, class: "w-16 h-16 mb-2 stroke-1 opacity-50" %>
      <p class="font-handwriting text-2xl text-center">
        No rolls found...
      </p>
      <% if params[:query].present? %>
        <p class="font-handwriting text-lg text-center mt-2 opacity-75">
          matching "<%= params[:query] %>"
        </p>
      <% end %>
    </div>
  <% end %>

  <!-- Existing Roll Cards with artwork inserted at random position -->
  <% artwork = random_card_artwork %>
  <% artwork_position = random_artwork_position %>
  <% @rolls.each_with_index do |roll, index| %>
    <% unless @tab == 'your_rolls' %>
      <% if index + 2 == artwork_position %>
        <!-- Artwork Card (randomly positioned, hidden on mobile) -->
        <% offset = artwork_vertical_offset(artwork) %>
        <div class="hidden lg:flex card-index flex-col items-center justify-center p-4 min-h-[220px] max-h-[220px] overflow-hidden transition-transform hover:rotate-1 grayscale hover:grayscale-0 transition-all duration-300">
          <%= image_tag "cards/#{artwork}.png",
                      alt: "#{artwork.titleize}",
                      class: "w-full h-full object-cover",
                      style: (offset > 0 ? "object-position: center #{offset}%" : nil) %>
        </div>
      <% end %>
    <% end %>
    <%= render "roll_card", roll: roll, tab: @tab %>
  <% end %>
</div>
